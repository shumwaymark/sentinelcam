%YAML 1.0
---
# DailyCleanup.yaml
# Multi-date cleanup task with data-aware retention policies
#
# RETENTION LOGIC: Each event is evaluated based on ALL data types it contains.
# An event is KEPT if ANY data type has value (quality faces, speed data, etc.)
# An event is DELETED only if ALL its data is past retention or low-value.

# Set this to True to delete the data.
# If False, take no action and only produce the report of data to be deleted.
run_deletes: False

# Maximum number of days to scan backwards from run date
max_scan_days: 30

# Retention profiles define cleanup strategies per outpost node
# Each profile evaluates ALL data types present in each event
retention_profiles:

  # Person-focused outposts (backyard, side yard cameras)
  # Evaluates: face quality (fd1/fr1) - keeps high-quality/recognized faces
  # If event also has other valuable data (pets, etc.), keeps that too
  person_tracking:
    strategy: face_quality
    retention_days: 14              # Base retention period
    min_face_ratio: 0.25            # Safety: minimum face detection ratio
    confidence_threshold: 0.99      # Keep if recognition confidence above this
    nodes: [lab1, alpha5]

  # Vehicle-focused outposts (driveway, street cameras)
  # Evaluates: vehicle speed data (vsp) - keeps speed measurements longer
  # If event also has faces, evaluates those too
  vehicle_tracking:
    strategy: vehicle_interest
    retention_days: 7               # Base retention for non-speed events
    speed_cutoff: 32.5              # High speed events for retention
    extended_days: 30               # Extended retention for high speed data
    nodes: [east]

  # Archive outposts - never auto-delete
  archive_all:
    strategy: never_delete
    nodes: []

  # Default fallback - simple time-based
  default:
    strategy: minimal_retention
    retention_days: 7
