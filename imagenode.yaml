# Settings file imagenode.yaml -- version 8 for sentinelcam
---
node:
  name: alpha5
  heartbeat: 10
  REP_watcher: False                 # Not recommended for sentinelcam
  queuemax: 50
  send_type: jpg
  send_threading: True
  print_settings: False
hub_address:
  H1: tcp://data1:5555
cameras:
  P1:
    viewname: PiCam3
    resolution: (640, 480)
    framerate: 32
    vflip: False
    threaded_read: False             # use direct image retrieval through picamera2 library
    detectors:
        outpost:
            publish_cam: 5567        # ZMQ port for image frame publishing
            publish_log: 5565        # ZMQ port for log publishing, must match logconfig below
            logconfig:               # logging configuration dictionary
                version: 1
                handlers:
                    zmq:
                        class: zmq.log.handlers.PUBHandler
                        interface_or_socket: tcp://*:5565
                        root_topic: alpha5
                        level: INFO
                root:
                    handlers: [zmq]
                    level: INFO
            camwatcher: tcp://data1:5566         # optional self-introduction to a running camwatcher
            spyglass: (640, 480)                 # must match camera "resolution" above
            detectobjects: mobilenetssd          # [mobilenetssd, yolov3]
            accelerator: none                    # [none, ncs2, coral]
            sentinel_tasks:
                person: GetFaces2                # Priority 1 sentinel task submission for "person" detections
                default: MobileNetSSD_allFrames  # optional catch-all task, submitted with priority 2
            mobilenetssd:
                prototxt_path: /home/ops/imagenode/outpost/mobilenet_ssd/MobileNetSSD_deploy.prototxt
                model_path: /home/ops/imagenode/outpost/mobilenet_ssd/MobileNetSSD_deploy.caffemodel
                confidence: 0.5
                target: cpu     # [cpu, myriad]
            interesting_objects: ['person', 'vehicle', 'dog', 'motorcycle', 'car', 'truck', 'cat']
            motion_params:           # Motion detection configuration
                varThreshold:  128   # MOG2 sensitivity threshold. Lower = more sensitive to changes
                detectShadows: False # Detect and mark shadows (usually false for performance)
                history: 500         # Number of frames for background model learning
                minContourW: 50      # Minimum width (pixels) for valid motion contour
                minContourH: 50      # Minimum height (pixels) for valid motion contour
                gaussianBlur: 5      # Gaussian kernel size for noise reduction
                noMotionThreshold: 5 # Frames without motion before ending event
