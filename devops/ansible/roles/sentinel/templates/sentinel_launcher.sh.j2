#!/bin/bash
# Sentinel launcher script - {{ sentinel_accelerator_type }} configuration
# Generated by SentinelCam Ansible

{% if sentinel_accelerator_type == 'ncs2' %}
# Setup OpenVino environment for NCS2 (LEGACY - deprecated)
# Note: NCS2/OpenVINO is only supported on legacy Raspberry Pi OS
# New deployments should use Coral EdgeTPU accelerator
source {{ openvino_setup_script }}
# Use OpenVINO venv for legacy NCS2 nodes
source {{ sentinel_venv_path_openvino }}/bin/activate
{% elif sentinel_accelerator_type == 'coral' %}
# Coral EdgeTPU accelerator (recommended for new deployments)
# Packages: libedgetpu, pycoral, tflite_runtime from feranick builds
source {{ sentinel_venv_path }}/bin/activate
{% else %}
# CPU-only inference (no hardware acceleration)
source {{ sentinel_venv_path }}/bin/activate
{% endif %}

# Execute Sentinel with unbuffered output
exec python -u {{ sentinel_install_path }}/sentinel/sentinel.py
